<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="../general.css">
        <link rel="stylesheet" href="ordina.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    </head>
    <body>
        <div id="container" style="background-color: #f77a0d;">
            <div class="header">
                <a href="../guestPage.html" draggable="false">
                    <img src="../BurgerShot-HDLogo.svg" width="180px" style="margin-top: -2px;" draggable="false">
                </a>
                <nav class="navigat" style="text-align: right;">
                    
                    <li class="navigat"><a href="#" data-target="#modalLogin" data-toggle="modal" class="access-link" onclick="openModal()">Accedi</a></li>
                    <li class="navigat"><a href="../guestPage.html#IdContatti" class="navigat">Contatti</a></li>
                    <li class="navigat"><a href="../Prenota/prenota.html" class="navigat">Prenota</a></li>
                    <li class="navigat"><a href="../Ordina/ordina.html" class="navigat">Ordina</a></li>
                    <li class="navigat"><a href="../Menu/menu.html" class="navigat">Menu</a></li>

                </nav>
            </div>
            
            <div class="corpoOrdina">
                <div class="listaOrdina">
                    <h2>Ordina dal nostro menu</h2>

                    <h3>Panini</h3>

                    <div class="flexbox">
                        <div class="flexitem">
                            <div class="Oggetto">Hamburger</div>
                            <div class="Prezzo">4.90</div>
                            <div class="Descrizione">Panino, Insalata, Pomodoro, Hamburger</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        <div class="flexitem">
                            <div class="Oggetto">Cheeseburger</div>
                            <div class="Prezzo">6.90</div>
                            <div class="Descrizione">Panino, Insalata, Pomodoro, Hamburger, Cheddar</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        <div class="flexitem">
                            <div class="Oggetto">Double Cheeseburger</div>
                            <div class="Prezzo">7.90</div>
                            <div class="Descrizione">Panino, Insalata, Pomodoro, Doppio Hamburger, Doppio Cheddar</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        <div class="flexitem">
                            <div class="Oggetto">Bacon Cheeseburger</div>
                            <div class="Prezzo">12.90</div>
                            <div class="Descrizione">Panino, Insalata, Pomodoro, Hamburger, Cheddar, Bacon</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        <div class="flexitem">
                            <div class="Oggetto">Chicken Burger</div>
                            <div class="Prezzo">8.90</div>
                            <div class="Descrizione">Panino, Insalata, Pomodoro, Petto di pollo</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        <div class="flexitem">
                            <div class="Oggetto">Chicken Burger BBQ</div>
                            <div class="Prezzo">9.90</div>
                            <div class="Descrizione">Panino, Insalata, Pomodoro, Petto di Pollo, Salsa BBQ</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        
                        <div class="flexitem">
                            <div class="Oggetto">CocaCola</div>
                            <div class="Prezzo">2.90</div>
                            <div class="Descrizione">Bevanda da gustare fredda</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        
                        <div class="flexitem">
                            <div class="Oggetto">Fanta</div>
                            <div class="Prezzo">2.90</div>
                            <div class="Descrizione">Arance 100% italiane</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        
                        <div class="flexitem">
                            <div class="Oggetto">Tiramis√π a aaa a  aaaa</div>
                            <div class="Prezzo">5.90</div>
                            <div class="Descrizione">Mascarpone e pavesini</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        
                        <div class="flexitem">
                            <div class="Oggetto">Gelato</div>
                            <div class="Prezzo">5.90</div>
                            <div class="Descrizione">Pallina di gelato alla vaniglia</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                        
                        <div class="flexitem">
                            <div class="Oggetto">Torta della nonna</div>
                            <div class="Prezzo">7.90</div>
                            <div class="Descrizione">Un bel pezzo</div>
                            <div class = "bottoni">
                                <button class = "add"> + </button>
                                <span class="quantity">0</span>
                                <button class = "sub"> - </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="riepilogo">
                    <h2>Riepilogo Ordine</h2>
                    <div class="corpoLista">
                        <ul id="riepilogoLista"></ul>
                    </div>
                    TOTALE
                </div>
                

            </div>
        
        </div>
    </body>
</html>



<script>
   $(document).ready(function() {
    $(".add").click(function() {
        var flexitem = $(this).closest('.flexitem');
        var itemName = flexitem.find('.Oggetto').text(); // Ottieni il nome dell'oggetto dalla classe
        var priceElement = flexitem.find('.Prezzo');
        var price = parseFloat(priceElement.text());
        var prezzo = 0;
        prezzo = (prezzo + price).toFixed(2);
        priceElement.text(price);
        var quantityElement = flexitem.find(".quantity");
        var quantity = parseInt(quantityElement.text());
        quantity++;
        quantityElement.text(quantity);
        console.log(quantity);
        updateRiepilogo(itemName, quantity, prezzo);
    });

    $(".sub").click(function() {
        var flexitem = $(this).closest('.flexitem');
        var itemName = flexitem.find('.Oggetto').text(); // Ottieni il nome dell'oggetto dalla classe
        var priceElement = flexitem.find('.Prezzo');
        var price = parseFloat(priceElement.text());
        priceElement.text(price);
        var quantityElement = flexitem.find(".quantity");
        var quantity = parseInt(quantityElement.text());
        if (quantity > 0) {
            quantity--;
            quantityElement.text(quantity);
            var prezzo = 0;
            prezzo = (prezzo + price).toFixed(2);
            
            console.log(quantity);
            updateRiepilogo(itemName, quantity, prezzo);
        }
    });
});

function updateRiepilogo(itemName, quantity, price) {
    var riepilogoList = $("#riepilogoLista");
    var listItem = riepilogoList.find("li[data-item='" + itemName + "']");

    if (quantity === 0) {
        listItem.remove();
    } else {
        var newItem = "<li data-item='" + itemName + "'>" + quantity + " x " + itemName + " $"+ price + "</li>";

        if (listItem.length === 0) {
            riepilogoList.append(newItem);
        } else {
            var newPrice = (quantity * price).toFixed(2);
            newItem = "<li data-item='" + itemName + "'>" + quantity + " x "  + itemName + " $"+ newPrice + "</li>";
            listItem.replaceWith(newItem);
        }
    }
}
</script>